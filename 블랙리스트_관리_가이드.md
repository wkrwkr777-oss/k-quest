# 블랙리스트 관리 기능 설치 가이드

## ✅ **완료된 작업:**

1. **블랙리스트 테이블 SQL** (`supabase_blacklist.sql`) ✅
2. **블랙리스트 관리 컴포넌트** (`BlacklistManager.tsx`) ✅
3. **관리자 대시보드 통합** ✅

---

## 🚀 **지금 바로 하실 일:**

### **1단계: Supabase SQL 실행** (필수!)

1. [Supabase 대시보드](https://supabase.com/dashboard) 접속
2. 프로젝트 선택 → 왼쪽 메뉴 **"SQL Editor"**
3. **"New Query"** 클릭
4. **`supabase_blacklist.sql`** 파일 내용 전체 복사
5. **"Run"** 버튼 클릭
6. **"Success"** 확인 → 완료!

### **2단계: 관리자 페이지 접속**

1. 로컬 서버 새로고침 (F5)
2. `/admin` 또는 `/dashboard` 페이지 접속
3. 화면 맨 아래에 **"블랙리스트 관리"** 섹션 확인

---

## 📋 **기능 사용법:**

### **사용자 차단하기**
1. **"사용자 차단"** 버튼 클릭
2. **이메일 입력** (차단할 사용자 이메일)
3. **차단 사유 입력** (예: "부적절한 행위", "사기 시도" 등)
4. **메모 입력** (선택사항, 상세 내역)
5. **"차단하기"** 버튼 클릭

### **차단된 사용자 목록 확인**
- 화면에 자동으로 표시됩니다.
- 빨간색 배지: 현재 차단된 사용자
- 회색 배지: 해제된 사용자 (과거 이력)

### **차단 해제하기**
1. 차단된 사용자 옆 **"해제"** 버튼 클릭
2. 확인 메시지에서 **"확인"** 클릭
3. 해당 사용자는 다시 로그인 가능

---

## 🔒 **보안 기능:**

### **자동 차단 메커니즘**
- 블랙리스트에 추가된 사용자는 **즉시 로그인 불가능**
- 기존 세션도 **자동으로 종료**됨
- 차단 해제 전까지 **모든 서비스 접근 차단**

### **에러 메시지**
차단된 사용자가 로그인 시도 시:
```
차단된 사용자입니다. 고객센터(wkrwkr777@gmail.com)로 문의하세요.
```

---

## ⚠️ **주의사항:**

1. **차단은 신중하게**: 실수로 차단 시 고객 불만 발생 가능
2. **사유를 명확히**: 나중에 분쟁 시 근거 자료로 활용
3. **메모 활용**: 상세한 내역을 기록하면 관리가 편함
4. **정기적인 검토**: 과거 차단 이력을 주기적으로 검토하여 해제 여부 판단

---

## 🎯 **실전 사용 시나리오:**

### **예시 1: 사기 시도 사용자**
- **차단 사유**: "결제 후 서비스 미제공"
- **메모**: "2025-12-03, 3건의 신고 접수. 환불 거부."
- **조치**: 즉시 차단 + 추후 법적 조치 검토

### **예시 2: 부적절한 언행**
- **차단 사유**: "욕설 및 비방"
- **메모**: "채팅 로그 참조: quest_id_1234"
- **조치**: 경고 후 재발 시 차단 (또는 즉시 차단)

### **예시 3: 미성년자 우회 가입**
- **차단 사유**: "미성년자 허위 정보 가입"
- **메모**: "생년월일 조작 확인됨"
- **조치**: 즉시 차단 + 재가입 방지

---

## 📊 **통계 활용:**

블랙리스트 데이터를 활용하여:
- 월별 차단 사유 분석
- 문제 사용자 패턴 파악
- 플랫폼 정책 개선

---

## 🆘 **문제 해결:**

### **"블랙리스트 섹션이 안 보여요"**
→ Supabase SQL(`supabase_blacklist.sql`)을 실행했는지 확인

### **"차단했는데 로그인이 돼요"**
→ 브라우저 새로고침 또는 시크릿 모드로 재시도

### **"에러가 나요"**
→ `.env.local`에 Supabase 키가 제대로 설정되어 있는지 확인

---

**사장님, 이제 블랙리스트 관리가 완전히 구축되었습니다!** 🎉
