# 💎 K-Quest 프리미엄 신뢰도 시스템 (Trust System)

## ✨ 개요
K-Quest는 단순한 별점 시스템을 넘어, **게임 랭크 시스템**과 같은 몰입감 있는 신뢰도 시스템을 제공합니다.
사용자의 활동(완료율, 시간 준수, 리뷰 등)을 종합하여 **0% ~ 100%**의 신뢰도 점수를 산출하고, 이에 따른 **화려한 티어 뱃지**를 부여합니다.

---

## 🏆 티어 시스템 (Tier System)

| 티어 (Tier) | 점수 범위 | 뱃지 디자인 | 혜택/페널티 |
|------------|----------|-------------|-------------|
| **💎 DIAMOND** | 95 ~ 100% | 푸른빛 광채 + 펄스 효과 | 수수료 할인, 상단 노출, 전용 테두리 |
| **💠 PLATINUM** | 90 ~ 94% | 메탈릭 실버 + 홀로그램 | 상단 노출 우선권 |
| **👑 GOLD** | 80 ~ 89% | 골드 그라데이션 + 금가루 | 신뢰도 인증 마크 |
| **🥈 SILVER** | 70 ~ 79% | 깔끔한 실버 | 기본 기능 사용 |
| **🥉 BRONZE** | 50 ~ 69% | 묵직한 브론즈 | 기본 기능 사용 |
| **⚠️ WARNING** | 30 ~ 49% | 붉은색 깜빡임 효과 | 일부 기능 제한, 경고 표시 |
| **🚫 BLACKLIST** | 0 ~ 29% | 깨진 유리 + 흑백 처리 | **서비스 이용 불가**, 계정 정지 |

---

## 📊 점수 산정 방식 (Algorithm)

신뢰도 점수는 다음 요소들을 종합하여 실시간으로 계산됩니다:

### 수행자 (Performer)
- **리뷰 평점 (50%)**: 의뢰자가 남긴 별점 (5점 만점 → 100점 환산)
- **완료율 (30%)**: 맡은 퀘스트 중 성공적으로 완료한 비율
- **시간 준수 (20%)**: 마감 기한 내 제출 비율
- **페널티**: 결과물 거부 시 **-5점** 차감

### 의뢰자 (Client)
- **승인율**: 결과물 승인 비율
- **분쟁 발생**: 분쟁 패소 시 점수 대폭 차감
- **페널티**: 정당한 사유 없는 거부 반복 시 점수 차감

---

## 💻 UI 컴포넌트 사용법

### 1. 신뢰도 뱃지 (`TrustBadge`)
닉네임 옆이나 프로필 어디든 간편하게 추가할 수 있습니다.

```tsx
import TrustBadge from '@/components/TrustBadge'

// 기본형 (중간 사이즈, 라벨+점수 표시)
<TrustBadge score={98} />

// 미니형 (작은 사이즈, 점수만 표시)
<TrustBadge score={85} size="sm" showLabel={false} />

// 애니메이션 끄기
<TrustBadge score={40} animate={false} />
```

### 2. 프로필 카드 (`UserProfileCard`)
사용자 정보를 보여줄 때 자동으로 뱃지가 포함됩니다.

```tsx
import UserProfileCard from '@/components/UserProfileCard'

<UserProfileCard 
    user={{
        id: '...',
        full_name: '김퀘스트',
        trust_score: 98,
        trust_tier: 'Diamond',
        user_type: 'performer',
        completed_quests: 150
    }} 
/>
```

---

## 🛡️ 시스템 아키텍처

### 데이터베이스 (`supabase_trust_system.sql`)
- `profiles`: `trust_score`, `trust_tier`, `is_blacklisted` 컬럼 추가
- `performer_reputation`: 상세 통계 테이블
- **자동화 트리거**:
  - 리뷰 작성 시 → 점수 자동 업데이트
  - 퀘스트 완료 시 → 통계 자동 업데이트
  - 점수 변동 시 → 티어 및 블랙리스트 자동 갱신

---

## 🚀 기대 효과
1. **동기 부여**: 화려한 다이아몬드 뱃지를 얻기 위해 성실하게 활동
2. **즉각적인 식별**: 닉네임 옆 뱃지만 보고도 "이 사람은 믿을 수 있다" 판단 가능
3. **자정 작용**: 불량 이용자(Warning/Blacklist)는 자연스럽게 도태됨

---

**작성일:** 2024-12-02  
**상태:** ✅ 구현 완료 (DB + UI + Logic)
